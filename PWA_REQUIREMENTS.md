# PWA要件定義書 - パスマネ

## 1. プロジェクト概要

**アプリ名**: パスマネ
**目的**: 既存のパスワード管理アプリをPWA化し、オフライン機能と生体認証を追加する
**ターゲットプラットフォーム**: iOS（メイン）、クロスプラットフォーム対応

## 2. 機能要件

### 2.1 オフライン機能

#### ✅ 対応機能（オフライン時に利用可能）
- パスワード一覧表示
- パスワード検索機能
- パスワード詳細閲覧
- 既存データの復号化・表示

#### ❌ 非対応機能（オンライン必須）
- パスワード新規追加
- パスワード編集・更新
- パスワード削除
- Supabaseとの同期

### 2.2 認証機能
- 既存のSupabase認証システム継続使用
- **生体認証（指紋・Face ID）の追加実装**
  - Web Authentication API使用
  - iOSのTouchID/FaceID対応
  - Android指紋認証対応

### 2.3 データ管理
- **オフラインデータの暗号化ストレージ**
  - IndexedDB/WebSQL使用
  - 暗号化レベル: AES-256
  - ローカルキー管理
- オンライン時のデータ同期

### 2.4 UI/UX
- **既存アプリとの見た目差別化**
  - モダンなPWAインターフェース
  - スムーズなアニメーション
  - ネイティブアプリライクな操作感
- オフライン状態の視覚的表示
- インストールプロンプトの実装

## 3. 技術要件

### 3.1 PWA基本機能
- **Webアプリマニフェスト（manifest.json）**
  - アプリ名: "パスマネ"
  - 表示モード: standalone
  - テーマカラー: #3b82f6（現在のメインカラー）
  - 背景色: #ffffff

- **Service Worker**
  - キャッシュ戦略の実装
  - バックグラウンド同期（将来実装用の準備）
  - オフライン検知

- **アプリアイコン**
  - 192x192, 512x512のPNGアイコン
  - Apple Touch Icon（180x180）
  - Favicon（32x32, 16x16）

### 3.2 セキュリティ要件
- HTTPS必須（PWAの基本要件）
- オフラインデータの暗号化
- 生体認証のフォールバック機能
- セッション管理の継続

### 3.3 パフォーマンス要件
- 初回読み込み時間: 3秒以内
- オフライン時の応答速度: 1秒以内
- アプリサイズ: 10MB以下

## 4. 将来実装予定機能

### 4.1 プッシュ通知機能
- パスワード期限切れ通知
- セキュリティアラート
- データ同期完了通知
- Web Push APIの実装準備

### 4.2 高度なオフライン機能
- オフライン時の編集キュー機能
- 競合解決機能
- バックグラウンド同期

## 5. 開発フェーズ

### Phase 1: PWA基盤構築
1. manifest.json作成
2. アプリアイコン生成
3. Service Worker基本実装
4. オフラインキャッシュ戦略

### Phase 2: オフライン機能実装
1. IndexedDBデータストレージ
2. データ暗号化システム
3. オフライン状態検知・UI制御

### Phase 3: 生体認証・UX改善
1. Web Authentication API実装
2. インストールプロンプト
3. UI/UXの差別化実装

### Phase 4: 将来機能準備
1. プッシュ通知基盤構築
2. バックグラウンド同期準備

## 6. 品質保証

### 6.1 テスト要件
- iOS Safari, Chrome テスト
- Android Chrome テスト
- オフライン/オンライン切り替えテスト
- 生体認証テスト
- セキュリティテスト

### 6.2 パフォーマンステスト
- Lighthouse PWAスコア 90点以上
- モバイルページ速度テスト
- オフライン機能テスト

## 7. 制約事項

- iOSでのPWA制限（App Store配布不可）
- iOS SafariでのService Worker制限
- 生体認証ブラウザ対応状況
- ストレージ容量制限

---

**作成日**: 2025-08-11
**更新日**: 2025-08-11
**バージョン**: 1.0